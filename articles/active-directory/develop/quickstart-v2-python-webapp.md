---
title: Přidání přihlašování do webové aplikace v Pythonu Microsoft Identity Platform | Azure
description: Naučte se implementovat přihlašování Microsoftu na webové aplikaci v Pythonu pomocí OAuth2.
services: active-directory
author: abhidnya13
manager: CelesteDG
ms.service: active-directory
ms.subservice: develop
ms.topic: quickstart
ms.workload: identity
ms.date: 09/25/2019
ms.author: abpati
ms.custom: aaddev
ms.openlocfilehash: 8a6e8dad7549b3656d4387cfad1d0c3a44b13975
ms.sourcegitcommit: 5ab4f7a81d04a58f235071240718dfae3f1b370b
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 12/10/2019
ms.locfileid: "74965972"
---
# <a name="quickstart-add-sign-in-with-microsoft-to-a-python-web-app"></a>Rychlý Start: Přidání přihlašování do webové aplikace v Pythonu pomocí Microsoftu

[!INCLUDE [active-directory-develop-applies-v2](../../../includes/active-directory-develop-applies-v2.md)]

V tomto rychlém startu se dozvíte, jak integrovat webovou aplikaci v Pythonu s platformou Microsoft identity. Your app will sign in a user, get an access token to call the Microsoft Graph API, and make a request to the Microsoft Graph API.

When you've completed the guide, your application will accept sign-ins of personal Microsoft accounts (including outlook.com, live.com, and others) and work or school accounts from any company or organization that uses Azure Active Directory.

![Shows how the sample app generated by this quickstart works](media/quickstart-v2-python-webapp/python-quickstart.svg)

## <a name="prerequisites"></a>Předpoklady

To run this sample, you will need:

- [Python 2.7+](https://www.python.org/downloads/release/python-2713) or [Python 3+](https://www.python.org/downloads/release/python-364/)
- [Flask](http://flask.pocoo.org/), [Flask-Session](https://pythonhosted.org/Flask-Session/), [requests](https://requests.kennethreitz.org//en/master/)
- [MSAL Python](https://github.com/AzureAD/microsoft-authentication-library-for-python)

> [!div renderon="docs"]
>
> ## <a name="register-and-download-your-quickstart-app"></a>Registrace a stažení aplikace pro rychlý start
>
> You have two options to start your quickstart application: express (Option 1), and manual (Option 2)
>
> ### <a name="option-1-register-and-auto-configure-your-app-and-then-download-your-code-sample"></a>Možnost 1: Registrace a automatická konfigurace aplikace a následné stažení vzorového kódu
>
> 1. Go to the [Azure portal - App registrations](https://portal.azure.com/#blade/Microsoft_AAD_IAM/ActiveDirectoryMenuBlade/RegisteredApps).
> 1. Select **New registration**.
> 1. Zadejte název vaší aplikace a Vyberte **Zaregistrovat**.
> 1. Follow the instructions to download and automatically configure your new application.
>
> ### <a name="option-2-register-and-manually-configure-your-application-and-code-sample"></a>Možnost 2: Registrace a ruční konfigurace aplikace a vzorového kódu
>
> #### <a name="step-1-register-your-application"></a>Krok 1: Registrace aplikace
>
> Pokud chcete zaregistrovat aplikaci a ručně přidat informace o registraci aplikace ke svému řešení, postupujte následovně:
>
> 1. Přihlaste se k webu [Azure Portal](https://portal.azure.com) pomocí pracovního nebo školního účtu nebo osobního účtu Microsoft.
> 1. Pokud váš účet umožňuje přístup k více tenantům, vyberte svůj účet v pravém horním rohu a nastavte relaci portálu na požadovaného tenanta Azure AD.
> 1. Navigate to the Microsoft identity platform for developers [App registrations](https://go.microsoft.com/fwlink/?linkid=2083908) page.
> 1. Select **New registration**.
> 1. Když se zobrazí stránka **Registrace aplikace**, zadejte registrační informace vaší aplikace:
>      - V části **Název** zadejte smysluplný název aplikace, který se zobrazí uživatelům aplikace, například `python-webapp`.
>      - Under **Supported account types**, select **Accounts in any organizational directory and personal Microsoft accounts**.
>      - Under the **Redirect URI** section, in the drop-down list, select the **Web** platform, and then set the value to `http://localhost:5000/getAToken`.
>      - Vyberte **Zaregistrovat**. On the app **Overview** page, note the **Application (client) ID** value for later use.
> 1. On the left hand menu, choose **Certificates & secrets** and click on **New client secret** in the **Client Secrets** section:
>
>      - Type a key description (of instance app secret).
>      - Select a key duration of **In 1 year**.
>      - When you click on **Add**, the key value will be displayed.
>      - Copy the value of the key. Budete ho potřebovat později.
> 1. Select the **API permissions** section
>
>      - Click the **Add a permission** button and then,
>      - Ensure that the **Microsoft APIs** tab is selected
>      - In the *Commonly used Microsoft APIs* section, click on **Microsoft Graph**
>      - In the **Delegated permissions** section, ensure that the right permissions are checked: **User.ReadBasic.All**. Use the search box if necessary.
>      - Select the **Add permissions** button
>
> [!div class="sxs-lookup" renderon="portal"]
>
> #### <a name="step-1-configure-your-application-in-azure-portal"></a>Krok 1: Nakonfigurujte si aplikaci na portálu Azure Portal
>
> For the code sample for this quickstart to work, you need to:
>
> 1. Add a reply URL as `http://localhost:5000/getAToken`.
> 1. Create a Client Secret.
> 1. Add Microsoft Graph API's User.ReadBasic.All delegated permission.
>
> > [!div renderon="portal" id="makechanges" class="nextstepaction"]
> > [Make these changes for me]()
> > [!div id="appconfigured" class="alert alert-info"]
> > ![Už nakonfigurované](media/quickstart-v2-aspnet-webapp/green-check.png) Vaše aplikace je nakonfigurovaná s tímto atributem

#### <a name="step-2-download-your-project"></a>Krok 2: Stáhněte si projekt

[Download the Code Sample](https://github.com/Azure-Samples/ms-identity-python-webapp/archive/master.zip)

#### <a name="step-3-configure-the-application"></a>Step 3: Configure the Application

1. Extrahujte soubor ZIP do místní složky bližší ke kořenové složce, třeba **C:\Azure-Samples**.
1. If you use an integrated development environment, open the sample in your favorite IDE (optional).
1. Open the **app_config.py** file, which can be found in the root folder and replace with the following code snippet:

```python
CLIENT_ID = "Enter_the_Application_Id_here"
CLIENT_SECRET = "Enter_the_Client_Secret_Here"
AUTHORITY = "https://login.microsoftonline.com/Enter_the_Tenant_Name_Here"
```

> [!div renderon="docs"]
> Kde:
>
> - `Enter_the_Application_Id_here` je ID aplikace, kterou jste zaregistrovali.
> - `Enter_the_Client_Secret_Here` - is the **Client Secret** you created in **Certificates & Secrets**  for the application you registered.
> - `Enter_the_Tenant_Name_Here` - is the **Directory (tenant) ID** value of the application you registered.

#### <a name="step-4-run-the-code-sample"></a>Step 4: Run the code sample

1. You will need to install MSAL Python library, Flask framework, Flask-Sessions for server-side session management and requests using pip as follows:

   ```Shell
   pip install -r requirements.txt
   ```

2. Run app.py from shell or command line:

   ```Shell
   python app.py
   ```
   > [!IMPORTANT]
   > This quickstart application uses a client secret to identify itself as confidential client. Because the client secret is added as a plain-text to your project files, for security reasons, it is recommended that you use a certificate instead of a client secret before considering the application as production application. For more information on how to use a certificate, see [these instructions](https://docs.microsoft.com/azure/active-directory/develop/active-directory-certificate-credentials).

## <a name="more-information"></a>Další informace

### <a name="getting-msal"></a>Getting MSAL
MSAL is the library used to sign in users and request tokens used to access an API protected by the Microsoft identity Platform.
You can add MSAL Python to your application using Pip.

```Shell
pip install msal
```

### <a name="msal-initialization"></a>Inicializace knihovny MSAL
You can add the reference to MSAL Python by adding the following code to the top of the file where you will be using MSAL:

```Python
import msal
```

## <a name="next-steps"></a>Další kroky

Learn more about web apps that sign in users, and then that calls web APIs:

> [!div class="nextstepaction"]
> [Scenario: Web apps that sign in users](scenario-web-app-sign-user-overview.md)

[!INCLUDE [Help and support](../../../includes/active-directory-develop-help-support-include.md)]
